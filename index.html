<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calculadora de Presupuestos</title>
  <meta name="description" content="Calculadora simple de Presupuesto A (25% Provincia) y Presupuesto B (40% Provincia) con CABA al 35% y opci√≥n para calcular ambos." />
  <style>
    :root{
      --bg: #0b1220;
      --card: #0f1724;
      --muted: #94a3b8;
      --accent: #38bdf8;
      --glass: rgba(255,255,255,0.03);
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial}
    body{
      background: linear-gradient(135deg,var(--bg) 0%, #122033 100%);
      color: #e6eef8;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }

    .wrap{
      width:100%;
      max-width:820px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:14px;
      box-shadow: 0 10px 40px rgba(2,6,23,0.6);
      padding:18px;
      display:grid;
      grid-template-columns: 1fr 360px;
      gap:18px;
    }

    header{grid-column:1/-1;display:flex;align-items:center;gap:12px}
    header h1{margin:0;font-size:18px;color:var(--accent)}
    header p{margin:0;color:var(--muted);font-size:13px}

    .form{
      padding:18px;
      background:var(--card);
      border-radius:12px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.02);
    }

    label{display:block;color:var(--muted);font-size:13px;margin-bottom:8px}
    .field{display:block;width:100%;padding:12px;border-radius:10px;border:none;background:var(--glass);color:inherit;font-size:15px}

    .controls{display:flex;gap:10px;margin-top:14px}
    .controls button{
      flex:1;padding:12px;border-radius:10px;border:none;cursor:pointer;font-weight:700;
      background:linear-gradient(180deg,var(--accent),#0ea5e9);color:#05202a;transition:transform .12s ease,box-shadow .12s ease
    }
    .controls button.secondary{background:transparent;color:var(--accent);border:1px solid rgba(56,189,248,0.12);box-shadow:none;font-weight:600}
    .controls button:active{transform:translateY(1px)}

    /* Result panel */
    .result{
      padding:16px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
      min-height:180px;display:flex;flex-direction:column;gap:8px;align-items:stretch
    }

    .result h2{margin:0;font-size:15px;color:var(--accent)}
    .line{display:flex;justify-content:space-between;padding:8px 10px;border-radius:8px;background:rgba(255,255,255,0.015)}
    .muted{color:var(--muted);font-size:13px}

    .small{font-size:13px;color:var(--muted)}
    .hr{height:1px;background:rgba(255,255,255,0.03);margin:8px 0;border-radius:1px}

    footer{grid-column:1/-1;text-align:right;color:var(--muted);font-size:12px}

    @media (max-width:840px){
      .wrap{grid-template-columns:1fr;}
    }
  </style>
</head>
<body>
  <main class="wrap" role="main">
    <header>
      <div>
        <h1>üí≥ Calculadora de Presupuestos</h1>
        <p class="small">Us√° los botones para calcular Presupuesto A (25% Provincia) o B (40% Provincia). CABA siempre 35%. Se suma un 22% para tarjeta.</p>
      </div>
    </header>

    <section class="form" aria-labelledby="form-title">
      <label for="provincia">Valor Provincia</label>
      <input id="provincia" class="field" type="number" inputmode="decimal" placeholder="Ej: 10000" aria-describedby="prov-help">
      <div id="prov-help" class="small">Ingres√° el total correspondiente a Provincia (n√∫mero sin s√≠mbolos).</div>

      <label for="caba" style="margin-top:12px">Valor CABA</label>
      <input id="caba" class="field" type="number" inputmode="decimal" placeholder="Ej: 5000">

      <div class="controls" style="margin-top:18px">
        <button id="btnA" type="button">Presupuesto A</button>
        <button id="btnB" type="button">Presupuesto B</button>
        <button id="btnAB" type="button" class="secondary">Ambos</button>
      </div>

      <div style="display:flex;gap:10px;margin-top:12px;align-items:center">
        <label style="margin:0;flex:1">
          <input id="showBreakdown" type="checkbox" checked> Mostrar desglose detallado
        </label>
        <button id="btnCopy" class="secondary" style="padding:10px 12px;border-radius:10px;">Copiar resultado</button>
      </div>
    </section>

    <aside class="result" aria-live="polite">
      <h2>Resultados</h2>
      <div id="output" class="small muted">No hay c√°lculos todav√≠a. Ingres√° los valores y toc√° uno de los botones.</div>
    </aside>

    <footer>
      Guard√° este archivo como <strong>calculadora_presupuestos.html</strong> y abrilo en Chrome (m√≥vil o PC).
    </footer>
  </main>

  <script>
    const elProv = document.getElementById('provincia');
    const elCaba = document.getElementById('caba');
    const out = document.getElementById('output');
    const btnA = document.getElementById('btnA');
    const btnB = document.getElementById('btnB');
    const btnAB = document.getElementById('btnAB');
    const btnCopy = document.getElementById('btnCopy');
    const showBreakdown = document.getElementById('showBreakdown');

    function formatMoney(n){
      try{
        return Number(n).toLocaleString('es-AR',{minimumFractionDigits:2,maximumFractionDigits:2});
      }catch(e){
        return Number(n).toFixed(2);
      }
    }

    function calcular(porcProv, porcCaba){
      const provincia = parseFloat(elProv.value);
      const caba = parseFloat(elCaba.value);
      if (isNaN(provincia) || isNaN(caba)){
        out.innerHTML = '<div class="muted">‚ö†Ô∏è Ingres√° ambos valores num√©ricos para Provincia y CABA.</div>';
        return null;
      }

      const pProv = provincia * porcProv;
      const pCaba = caba * porcCaba;
      const subtotal = pProv + pCaba;
      const tarjeta = subtotal * 1.22;

      return {pProv,pCaba,subtotal,tarjeta};
    }

    function mostrarResultado(nombre, datos){
      if (!datos) return '';
      if (showBreakdown.checked){
        return `\n<div class="line"><div class="muted">${nombre} ‚Äî ${Math.round((datos.pProv/(datos.pProv+datos.pCaba))*100)}% / ${Math.round((datos.pCaba/(datos.pProv+datos.pCaba))*100)}%</div><div><strong>$${formatMoney(datos.subtotal)}</strong></div></div>
                <div class="line"><div class="muted">Provincia</div><div>$${formatMoney(datos.pProv)}</div></div>
                <div class="line"><div class="muted">CABA</div><div>$${formatMoney(datos.pCaba)}</div></div>
                <div class="hr"></div>
                <div class="line"><div class="muted">Con tarjeta (22% extra)</div><div><strong>$${formatMoney(datos.tarjeta)}</strong></div></div>`;
      } else {
        return `<div class="line"><div class="muted">${nombre}</div><div><strong>$${formatMoney(datos.subtotal)}</strong></div></div>`;
      }
    }

    btnA.addEventListener('click', ()=>{
      const datos = calcular(0.25,0.35);
      if (!datos) return;
      out.innerHTML = mostrarResultado('Presupuesto A (25% Provincia, 35% CABA)', datos);
    });

    btnB.addEventListener('click', ()=>{
      const datos = calcular(0.40,0.35);
      if (!datos) return;
      out.innerHTML = mostrarResultado('Presupuesto B (40% Provincia, 35% CABA)', datos);
    });

    btnAB.addEventListener('click', ()=>{
      const datosA = calcular(0.25,0.35);
      const datosB = calcular(0.40,0.35);
      if (!datosA || !datosB) return;
      out.innerHTML = mostrarResultado('Presupuesto A (25% Provincia, 35% CABA)', datosA) + mostrarResultado('Presupuesto B (40% Provincia, 35% CABA)', datosB);
    });

    btnCopy.addEventListener('click', ()=>{
      const text = out.innerText || out.textContent;
      if (!text) return;
      navigator.clipboard?.writeText(text).then(()=>{
        btnCopy.textContent = 'Copiado!';
        setTimeout(()=> btnCopy.textContent = 'Copiar resultado', 1600);
      }).catch(()=>{
        btnCopy.textContent = 'No disponible';
        setTimeout(()=> btnCopy.textContent = 'Copiar resultado', 1600);
      });
    });

    // small convenience: submit with Enter on second input
    elCaba.addEventListener('keydown', (e)=>{
      if (e.key === 'Enter') btnA.focus();
    });
  </script>
</body>
</html>
